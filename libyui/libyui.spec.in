#
# spec file for package libyui (Version @VERSION@)
#
# norootforbuild

Name:    libyui 
Version: @VERSION@
Release: 0
License: GPL v2
Group:	 System/Libraries
Source:  libyui-%{version}.tar.bz2
Source1: libyui-rpmlintrc

BuildRequires:	gcc-c++

# autodocs + docbook docs
BuildRequires:	doxygen
BuildRequires:	docbook-xsl-stylesheets libxslt
BuildRequires:	sgml-skel
Conflicts:	yast2-core < 2.16.38

# libyui ImplPtr
BuildRequires:	boost-devel

Provides:	yast2-libyui = %{version}
Obsoletes:	yast2-libyui < %{version}

Summary:	YaST2 - User Interface Engine

%description
This is the user interface engine that provides the abstraction from 
graphical user interfaces (Qt, Gtk) and text based user interfaces
(ncurses).

Originally developed for YaST, it can now be used independently of 
YaST for generic (C++) applications. This package has very few 
dependencies.

%package devel
Summary:	YaST2 - User Interface Engine header filews
Group:	Development/Languages/C and C++

Requires:	glibc-devel
Requires:	libstdc++-devel
Requires:	boost-devel

%description devel
This is the development package for libyui user interface engine
that provides the abstraction from graphical user interfaces (Qt, Gtk)
and text based user interfaces (ncurses).

This can be used independently of YaST for generic (C++) applications.
This package has very few dependencies.

%prep
%setup -n %{name}-%{version}

%build

export CFLAGS="$RPM_OPT_FLAGS -DNDEBUG"
export CXXFLAGS="$RPM_OPT_FLAGS -DNDEBUG"

./bootstrap.sh
%{?suse_update_config:%{suse_update_config -f}}
./configure --libdir=%{_libdir} --prefix=%{_prefix} --mandir=%{_mandir}
make %{?jobs:-j%jobs}

%install
make install DESTDIR="$RPM_BUILD_ROOT"

mkdir -p "$RPM_BUILD_ROOT"%{_vardir}/log/YaST2
%perl_process_packlist

%clean
rm -rf "$RPM_BUILD_ROOT"

%post -p /sbin/ldconfig

%postun -p /sbin/ldconfig

%files
%defattr(-,root,root)

%{_libdir}/lib*.so.*
%dir %doc %{_prefix}/share/doc/packages/libyui/

%files devel
%defattr(-,root,root)
%{_libdir}/lib*.so
%{_libdir}/lib*.la
%{_prefix}/include/yui
%{_libdir}/pkgconfig/libyui.pc
%dir %{_datadir}/cmake
%dir %{_datadir}/cmake/Modules
%{_datadir}/cmake/Modules/*
%doc %{_prefix}/share/doc/packages/libyui/examples

%changelog
